{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./javascript/lib/canvas.js","webpack:///./javascript/lib/sky.js","webpack:///./javascript/lib/stars.js","webpack:///./javascript/starsounds.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wB;;;;;;;;;;;ACRA,aAAa,mBAAO,CAAC,0CAAS;AAC9B,eAAe,mBAAO,CAAC,4CAAU;AACjC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB,eAAe;AAClC;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;;;AAGA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qB;;;;;;;;;;;AC5NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,sB;;;;;;;;;;;AC3DA,YAAY,mBAAO,CAAC,0CAAW;;AAE/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,CAAC,E","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./javascript/starsounds.js\");\n","const canvas = document.getElementById('canvas');\nconst ctx = canvas.getContext(\"2d\");\n// const innerWidth = window.innerWidth;\n// const innerHeight = window.innerHeight;\ncanvas.width = 1200;\ncanvas.height = 450;\ncanvas.dragging = false;\n\nmodule.exports = canvas;","const Star = require('./stars');\nconst canvas = require(\"./canvas\");\nconst context = canvas.getContext(\"2d\");\nconst DIM_X = canvas.width;\nconst DIM_Y = canvas.height;\nconst NUM_STARS = 17;\n\nclass Sky {\n  constructor() {\n    this.stars = [];\n    this.addStars();\n    this.firstStar = null;\n    this.secondStar = null;\n    this.dragStart = null;\n    this.sequence = [];\n    this.lines = [];\n    this.playing = false;\n    this.tempo = 1100;\n  }\n\n  addStars() {\n    for (let i = 0; i < NUM_STARS; i++) {\n      this.stars.push(\n        new Star({\n          pos: this.randomPosition(),\n          idx: i\n        })\n      );\n    }\n  }\n\n  clear(){\n      this.sequence = [];\n      this.lines = [];\n      this.playing = false;\n      this.draw(context);  \n  }\n\n  changeTempo(event){\n    this.tempo = event.target.value;\n  }\n\n  playSequence() {\n    let sequence = this.sequence;\n    let draw = this.draw;\n    let that = this;\n\n    if (this.playing === false){\n        this.playing = true;\n        this.asyncLoop({\n            length: sequence.length,\n            functionToLoop: function (loop, i) {\n                setTimeout(function () {\n                    if (that.playing === false){\n                      return;\n                    }\n                    let star = sequence[i];\n                    star.drawSelected(context);\n                    sequence[i].playSound();\n                    loop();\n                }, that.tempo);\n            },\n        });\n    }\n    \n\n  }\n\n  //https://stackoverflow.com/questions/4288759/asynchronous-for-cycle-in-javascript\n\n  asyncLoop(o) {\n    let i = -1;\n    let that = this;\n\n    let loop = function() {\n      i++;\n        setTimeout(function () {\n            that.draw(context);\n        }, that.tempo);\n\n      if (i === o.length) {\n          that.playing = false;\n        return;\n      }\n      o.functionToLoop(loop, i);\n      \n    };\n    loop();\n  }\n\n  draw(ctx) {\n    ctx.clearRect(0, 0, DIM_X, DIM_Y);\n    ctx.fillStyle = \"black\";\n    ctx.fillRect(0, 0, DIM_X, DIM_Y);\n    this.stars.forEach(star => {\n      star.draw(ctx);\n    });\n\n\n    this.lines.forEach((line) => {\n        this.dragStart = line[0].pos;\n        this.drawLine(line[1].pos);\n    });\n\n    this.dragStart = null;\n\n  }\n\n  drawLine(pos) {\n    context.beginPath();\n    context.moveTo(this.dragStart[0], this.dragStart[1]);\n    context.lineTo(pos[0], pos[1]);\n    context.strokeStyle = \"white\";\n    context.lineWidth = 2;\n    context.stroke();\n  }\n\n  randomPosition() {\n    let xCoord = DIM_X * Math.random();\n    let yCoord = DIM_Y * Math.random();\n\n    this.stars.forEach((star) => {\n        if ((xCoord <= star.pos[0] + star.radius + 10 &&\n            xCoord >= star.pos[0] - star.radius + 10)) {\n            xCoord += 40;\n        }\n\n        if ((yCoord <= star.pos[1] + star.radius + 10 &&\n            yCoord >= star.pos[1] - star.radius + 10)) {\n            yCoord += 40;\n        }\n    });\n\n    if (xCoord < 50) {\n      xCoord += 50;\n    } else if (xCoord >= DIM_X - 50) {\n      xCoord -= 50;\n    }\n\n    if (yCoord < 50) {\n      yCoord += 50;\n    } else if (yCoord >= DIM_Y - 50) {\n      yCoord -= 50;\n    }\n    return [xCoord, yCoord];\n  }\n\n  getCursorPosition(canv, event) {\n    let rect = canv.getBoundingClientRect();\n    let x = event.clientX - rect.left;\n    let y = event.clientY - rect.top;\n    return { x, y };\n  }\n\n  checkClickedStar(canv, event) {\n    const cursorPos = this.getCursorPosition(canv, event);\n\n    this.stars.forEach(star => {\n      let xPos = star.pos[0];\n      let yPos = star.pos[1];\n      let r = star.radius;\n      if (\n        cursorPos.x <= xPos + r &&\n        cursorPos.x >= xPos - r &&\n        cursorPos.y <= yPos + r &&\n        cursorPos.y >= yPos - r\n      ) {\n        if (this.firstStar === null) {\n          this.firstStar = star;\n          star.playSound();\n        } else if (star !== this.firstStar) {\n          this.secondStar = star;\n          star.playSound();\n        }\n      }\n    });\n  }\n\n  lineStart(canv, event) {\n    const cursorPos = this.getCursorPosition(canv, event);\n    this.checkClickedStar(canv, event);\n    let star = this.firstStar;\n    if (star) {\n      canvas.dragging = true;\n      this.dragStart = [this.firstStar.pos[0], this.firstStar.pos[1]];\n    }\n  }\n\n  lineDrag(canv, event) {\n    if (canvas.dragging === true) {\n      const cursorPos = this.getCursorPosition(canv, event);\n      this.drawLine(cursorPos);\n    }\n  }\n\n  lineEnd(canv, event) {\n    const cursorPos = this.getCursorPosition(canv, event);\n    canvas.dragging = false;\n\n    if (this.firstStar) {\n      this.checkClickedStar(canv, event);\n      let nextStar = this.secondStar;\n\n      if (nextStar) {\n        this.drawLine([nextStar.pos[0], nextStar.pos[1]]);\n        this.lines.push([this.firstStar, nextStar]);\n\n        if (this.sequence[this.sequence.length - 1] !== this.firstStar) {\n          this.sequence.push(this.firstStar);\n        }\n        this.sequence.push(this.secondStar);\n      }\n    }\n\n    this.dragStart = null;\n    this.firstStar = null;\n    this.secondStar = null;\n  }\n}\n\nmodule.exports = Sky;","const SOUNDS = [\n  \"audio/11072__angstrom__a-2.wav\",\n  \"audio/11073__angstrom__a2.wav\",\n  \"audio/11074__angstrom__b2.wav\",\n  \"audio/11075__angstrom__c-1.wav\",\n  \"audio/11076__angstrom__c-2.wav\",\n  \"audio/11077__angstrom__c1.wav\",\n  \"audio/11078__angstrom__c2.wav\",\n  \"audio/11079__angstrom__d-1.wav\",\n  \"audio/11080__angstrom__d-2.wav\",\n  \"audio/11083__angstrom__e1.wav\",\n  \"audio/11084__angstrom__e2.wav\",\n  \"audio/11085__angstrom__f-1.wav\",\n  \"audio/11086__angstrom__f1.wav\",\n  \"audio/11087__angstrom__g-1.wav\",\n  \"audio/11088__angstrom__g1.wav\",\n  \"audio/11081__angstrom__d1.wav\",\n  \"audio/11082__angstrom__d2.wav\"\n];\n\nclass Star {\n    constructor(values) {\n        this.pos = values.pos;\n        this.radius = Math.floor(Math.random() * 7) + 4; \n        this.color = \"white\";\n\n        let audio = document.createElement('audio');\n        audio.setAttribute(\"src\", SOUNDS[values.idx]);\n        document.body.appendChild(audio);\n\n        this.audio = audio;\n    }\n\n    playSound(){\n        this.audio.currentTime = 0;\n        this.audio.play();\n    }\n\n    draw(ctx){\n        ctx.fillStyle = this.color;\n        ctx.shadowColor = \"white\";\n        ctx.shadowBlur = 20;\n        ctx.beginPath();\n        ctx.arc( this.pos[0], this.pos[1], this.radius, 0, 2 * Math.PI, true);\n        ctx.fill();\n        ctx.closePath();\n    }\n\n    drawSelected(ctx){\n        ctx.fillStyle = this.color;\n        ctx.shadowColor = \"yellow\";\n        ctx.shadowBlur = 30;\n        ctx.beginPath();\n        ctx.arc(this.pos[0], this.pos[1], this.radius, 0, 2 * Math.PI, true);\n        ctx.fill();\n    }\n\n}\n\nmodule.exports = Star;","const Sky = require(\"./lib/sky\");\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    const root = document.getElementById('root');\n    const canvas = document.getElementById(\"canvas\");\n    const ctx = canvas.getContext(\"2d\");\n\n    const newSky = document.getElementById('new-sky');\n    const sequence = document.getElementById('sequence');\n    const clearSky = document.getElementById('clear-sky');\n    const tempo = document.getElementById('tempo');\n\n    const sky = new Sky();\n    sky.draw(ctx);\n\n    canvas.addEventListener('mousedown', () => \n        sky.lineStart(canvas,event), false);\n    canvas.addEventListener('mousemove', () =>\n        sky.lineDrag(canvas, event), false);\n    canvas.addEventListener(\"mouseup\", () => \n        sky.lineEnd(canvas, event), false);\n    newSky.addEventListener('click', () => \n        location.reload(), false);\n    sequence.addEventListener(\"click\", () => \n        sky.playSequence(), false);\n    clearSky.addEventListener('click', () => \n        sky.clear(), false);\n    tempo.addEventListener('change', ()=> \n        sky.changeTempo(event), false);\n\n\n});"],"sourceRoot":""}